# FartBot ‚Äî Telegram –±–æ—Ç (Web Service –¥–ª—è Render Free)

–ë–æ—Ç —Å—á–∏—Ç–∞–µ—Ç ¬´üí®¬ª –ø–æ –≥–æ–ª–æ—Å–æ–≤—ã–º –≤ –≥—Ä—É–ø–ø–µ, –≤—ã–¥–∞—ë—Ç –∞—á–∏–≤–∫–∏ –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç ¬´–∫–Ω—É—Ç—ã¬ª. 
–°–±–æ—Ä–∫–∞ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–∞ –ø–æ–¥ **Render Web Service (Free plan)**: –≤–Ω—É—Ç—Ä–∏ –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è HTTP‚Äë—Å–µ—Ä–≤–µ—Ä –Ω–∞ `/healthz`, –∞ Telegram‚Äë–ø–æ–ª–ª–∏–Ω–≥ –∫—Ä—É—Ç–∏—Ç—Å—è –≤ —Ñ–æ–Ω–µ.

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –ª–æ–∫–∞–ª—å–Ω–æ

```bash
python -m venv .venv && source .venv/bin/activate
pip install -r requirements.txt
export BOT_TOKEN=...   # —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
python web_entry.py    # –ø–æ–¥–Ω–∏–º–µ—Ç HTTP –∏ –∑–∞–ø—É—Å—Ç–∏—Ç –ø–æ–ª–ª–∏–Ω–≥
```

## –î–µ–ø–ª–æ–π –Ω–∞ Render –∫–∞–∫ Web Service (Free plan)

1) –ó–∞–ª–µ–π—Ç–µ –≤ GitHub. –í Render: **New ‚Üí Web Service ‚Üí Connect repo**.
2) Runtime: **Docker**. Plan: **Free**.
3) Env Vars: 
   - `BOT_TOKEN` ‚Äî –≤—Å—Ç–∞–≤—å—Ç–µ —Ç–æ–∫–µ–Ω (—Å–µ–∫—Ä–µ—Ç),
   - `ADMIN_USERNAMES` ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä `RussianStatham` (–±–µ–∑ `@`) –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `ADMIN_IDS`,
   - `PORT=10000` (–¥–ª—è –ª–æ–∫–∞–ª–∞, Render –ø–æ–¥—Å—Ç–∞–≤–∏—Ç —Å–≤–æ–π –ø–æ—Ä—Ç).
4) Health check: –ø—É—Ç—å `/healthz`.
5) –ù–∞–∂–º–∏—Ç–µ **Deploy**. –í –ª–æ–≥–∞—Ö —É–≤–∏–¥–∏—Ç–µ `fartbot alive` –∏ `Bot started...`.
6) –í @BotFather –æ—Ç–∫–ª—é—á–∏—Ç–µ **Privacy Mode** –∏ –¥–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞ –≤ —Å–≤–æ—é –≥—Ä—É–ø–ø—É.

> ‚ö†Ô∏è –ù–∞ Free‚Äë–ø–ª–∞–Ω–µ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö –¥–∏—Å–∫–æ–≤ –Ω–µ—Ç ‚Äî –ë–î –≤ `./data` –º–æ–∂–µ—Ç –ø—Ä–æ–ø–∞–¥–∞—Ç—å –ø—Ä–∏ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–µ. –î–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–ª–∞—Ç–Ω—ã–π –ø–ª–∞–Ω —Å Persistent Disk –∏–ª–∏ –≤–Ω–µ—à–Ω—é—é –ë–î.


## –í–µ–±—Ö—É–∫–∏ –Ω–∞ Render Free (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è Free-–ø–ª–∞–Ω–∞)

–ù–∞ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–º –ø–ª–∞–Ω–µ Render –±–æ—Ç—ã –Ω–∞ long polling –º–æ–≥—É—Ç ¬´–∑–∞—Å—ã–ø–∞—Ç—å¬ª. –ü–æ—ç—Ç–æ–º—É –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ **webhook**-—Ä–µ–∂–∏–º ‚Äî Telegram —Å–∞–º –ø—Ä–∏—Å—ã–ª–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è –Ω–∞ –≤–∞—à URL.

### –ó–∞–ø—É—Å–∫ –∫–∞–∫ Web Service (Free)
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ **Dockerfile** –∑–∞–ø—É—Å–∫–∞–µ—Ç `web_entry_webhook.py` (—Å–º. –Ω–∏–∂–µ).
2. –í Render: **New ‚Üí Web Service ‚Üí Connect repo** ‚Üí Plan: **Free**.
3. **Environment**: 
   - `BOT_TOKEN` ‚Äî —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ (—Å–µ–∫—Ä–µ—Ç)
   - `ADMIN_USERNAMES` ‚Äî `RussianStatham` (–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `ADMIN_IDS`)
   - (–æ–ø—Ü.) `WEBHOOK_URL` ‚Äî –ø–æ–ª–Ω—ã–π URL —Å–µ—Ä–≤–∏—Å–∞, –µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ —è–≤–Ω–æ –∑–∞–¥–∞—Ç—å; –∏–Ω–∞—á–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `RENDER_EXTERNAL_URL`
4. **Health check path**: `/healthz`

> –ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
> - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ë–î –∏ file‚Äëlock;
> - –°—Ç–∞–≤–∏—Ç webhook –Ω–∞ `<PUBLIC_URL>/webhook` (Render —Å–∞–º –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç `RENDER_EXTERNAL_URL`);
> - –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Ö–æ–¥—è—â–∏–µ –∞–ø–¥–µ–π—Ç—ã —á–µ—Ä–µ–∑ `aiogram.webhook.aiohttp_server`.

### –ö–∞–∫ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å CMD –Ω–∞ webhook-—Ä–µ–∂–∏–º
–ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –º–æ–π Dockerfile –∏–∑ –∞—Ä—Ö–∏–≤–∞ –ø–æ–¥ polling, –∑–∞–º–µ–Ω–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω—é—é —Å—Ç—Ä–æ–∫—É –Ω–∞:
```
CMD ["python", "-u", "web_entry_webhook.py"]
```
–í –∞—Ä—Ö–∏–≤–µ –¥–ª—è webhook —ç—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ.
